{% extends "base.template.html" %}

{% block content %}

{% for genre in all_genre %}
{% if loop.index is divisibleby 2 %}
<div style="background-color: lightgrey;">
    <p class="h1 px-5 pt-2 headerfont headerfontcolor">
        {{genre.genre.capitalize()}}
    </p>
    <div class="container-fluid py-3">

        <div class="row mx-5">
            {% set moviebygenre = [] %}
            {% for movie in all_movies %}
            {% if genre.genre == movie.genre %}
            {% if moviebygenre.append(movie) is none %}
            {{''}}
            {% endif %}
            {% endif %}
            {% endfor %}
            {% set limit = 0 %}
            {% if moviebygenre|length > 3 %}
            {% set limit = 3 %}
            {% else %}
            {% set limit = moviebygenre|length %}
            {% endif %}
            {% for i in range (limit) %}
            <div class="col-4 d-flex justify-content-center">
                <a href="{{url_for('show_movieinfo_page',movie_id=moviebygenre[i]._id)}}">
                    <div class="container">
                        <img src="{{moviebygenre[i].imageurl}}" alt="" class="rounded"
                            style="height: 300px; width: 450px;">
                        <p class="text-center headerfont">{{moviebygenre[i].name}}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
            <div class="col-3 d-flex justify-content-start">
                <a
            href="{{url_for('show_movieinfolist_bygenre',genre=genre.genre)}}"><img src="{{url_for('static',filename='images/viewmore.svg')}}" alt="" style="width:150;height:30px"></a>
                
            </div>
        </div>
    </div>
</div>
{% else %}
<div >
    <p class="h1 px-5 pt-2 headerfont headerfontcolor">
           {{genre.genre.capitalize()}}
    </p>
    <div class="container-fluid py-3">

        <div class="row mx-5">
            {% set moviebygenre = [] %}
            {% for movie in all_movies %}
            {% if genre.genre == movie.genre %}
            {% if moviebygenre.append(movie) is none %}
            {{''}}
            {% endif %}
            {% endif %}
            {% endfor %}
            {% set limit = 0 %}
            {% if moviebygenre|length > 3 %}
            {% set limit = 3 %}
            {% else %}
            {% set limit = moviebygenre|length %}
            {% endif %}
            {% for i in range (limit) %}
            <div class="col-4 d-flex justify-content-center">
                <a href="{{url_for('show_movieinfo_page',movie_id=moviebygenre[i]._id)}}">
                    <div class="container">
                        <img src="{{moviebygenre[i].imageurl}}" alt="" class="rounded"
                            style="height: 300px; width: 450px;">
                        <p class="text-center headerfont">{{moviebygenre[i].name}}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
            <div class="col-3 d-flex justify-content-start">
                <a
            href="{{url_for('show_movieinfolist_bygenre',genre=genre.genre)}}"><img src="{{url_for('static',filename='images/viewmore.svg')}}" alt="" style="width:150;height:30px"></a>
                
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endfor %}

{% endblock %}
